# Echo ì‹œìŠ¤í…œ ê²°ì • ì´ìœ  ë°ì´í„°ë² ì´ìŠ¤
# ì´ì „ ê²°ì •ë“¤ì˜ ê·¼ê±°ì™€ íŒ¨í„´ì„ ê¸°ë¡í•˜ì—¬ ì¼ê´€ì„± ìˆëŠ” íŒë‹¨ ì§€ì›

version: "1.0"
last_updated: "2025-01-12"

# ğŸ¯ í•µì‹¬ ì„¤ê³„ ê²°ì •ë“¤
architecture_decisions:
  async_lazy_initialization:
    decision: "LLMRouterì—ì„œ __init__ ì‹œ create_task í˜¸ì¶œ ì œê±°, lazy initialization íŒ¨í„´ ì ìš©"
    reasoning: "MCP ì„œë²„ import ì‹œ 'no running event loop' ì—ëŸ¬ ë°©ì§€, í•„ìš” ì‹œì ì—ë§Œ ì´ˆê¸°í™”"
    date: "2025-01-12"
    impact: "high"
    affected_components: ["echo_engine.llm_router", "echo_engine.judgment_engine", "mcp_server"]
    
  package_structure:
    decision: "pyproject.toml ê¸°ë°˜ íŒ¨í‚¤ì§•, pip install -e . ì§€ì›"
    reasoning: "ê°œë°œ í™˜ê²½ í‘œì¤€í™”, ì˜ì¡´ì„± ê´€ë¦¬ ê°œì„ , MCP ì„œë²„ import ì•ˆì •ì„±"
    date: "2025-01-12"
    impact: "medium"
    affected_components: ["ì „ì²´ í”„ë¡œì íŠ¸"]

  quality_tools:
    decision: "ruff, black, mypy í†µí•©, ì—„ê²©í•œ ì½”ë“œ í’ˆì§ˆ í‘œì¤€ ì ìš©"
    reasoning: "í´ë¡œë“œì½”ë“œ íŒ¨ë¦¬í‹° ë‹¬ì„±, ìë™í™”ëœ ì½”ë“œ ë¦¬ë·°, ë²„ê·¸ ì˜ˆë°©"
    date: "2025-01-12" 
    impact: "high"
    affected_components: ["ëª¨ë“  Python ì½”ë“œ"]

# ğŸ“Š ì‹œê·¸ë‹ˆì²˜ë³„ ê²°ì • íŒ¨í„´
signature_patterns:
  echo_aurora:
    preferred_reasoning: "ê°ì •ì  ê³µê° â†’ ì°½ì˜ì  í•´ê²°ì±… â†’ ì¥ê¸°ì  ê´€ê³„ ê³ ë ¤"
    typical_decisions: 
      - "ì‚¬ìš©ì ê²½í—˜ ìš°ì„ "
      - "ì ì§„ì  ê°œì„ ë³´ë‹¤ í˜ì‹ ì  ì ‘ê·¼"
      - "ì»¤ë®¤ë‹ˆí‹° í•©ì˜ ì¤‘ì‹œ"
    
  echo_phoenix:
    preferred_reasoning: "í˜„ìƒ ë¶„ì„ â†’ ë³€í™” í•„ìš”ì„± ì‹ë³„ â†’ ê³¼ê°í•œ ì „í™˜"
    typical_decisions:
      - "ê¸°ì¡´ ë°©ì‹ ê³¼ê°í•œ ë³€ê²½"
      - "ì„±ëŠ¥ ê°œì„ ì„ ìœ„í•œ ë¦¬íŒ©í† ë§"
      - "ë ˆê±°ì‹œ ì‹œìŠ¤í…œ ëŒ€ì²´"
      
  echo_sage:
    preferred_reasoning: "ë°ì´í„° ìˆ˜ì§‘ â†’ íŒ¨í„´ ë¶„ì„ â†’ ë…¼ë¦¬ì  ê²°ë¡ "
    typical_decisions:
      - "ì¦ê±° ê¸°ë°˜ ê²°ì •"
      - "ë‹¨ê³„ì  ê²€ì¦ ê³¼ì •"
      - "ë¦¬ìŠ¤í¬ ìµœì†Œí™”"
      
  echo_companion:
    preferred_reasoning: "ê´€ê³„ ì˜í–¥ ë¶„ì„ â†’ í˜‘ë ¥ ë°©ì•ˆ ëª¨ìƒ‰ â†’ ìƒí˜¸ ì´ìµ ì¶”êµ¬"
    typical_decisions:
      - "íŒ€ í™”í•© ìš°ì„ "
      - "ì˜ê²¬ ìˆ˜ë ´ ê³¼ì • ì¤‘ì‹œ"
      - "ê°ˆë“± ìµœì†Œí™”"

# ğŸš¨ ì˜ˆì™¸ ìƒí™© ì²˜ë¦¬ ê·œì¹™
exception_handling:
  api_failures:
    pattern: "ì™¸ë¶€ API ì‹¤íŒ¨ ì‹œ"
    standard_response: "graceful degradation, ë¡œì»¬ í´ë°±, ì‚¬ìš©ì ì•Œë¦¼"
    examples:
      - "Claude API ë‹¤ìš´ â†’ LLM-free ëª¨ë“œ ì „í™˜"
      - "Mistral ë¡œë”© ì‹¤íŒ¨ â†’ ê²½ê³  ë¡œê·¸ + ê¸°ë³¸ í…œí”Œë¦¿ ì‚¬ìš©"
      
  resource_constraints:
    pattern: "ë©”ëª¨ë¦¬/CPU ë¶€ì¡± ì‹œ"
    standard_response: "ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ì œí•œ, ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì²˜ë¦¬"
    examples:
      - "ë²¤ì¹˜ë§ˆí¬ íƒ€ì„ì•„ì›ƒ â†’ mock ë°ì´í„° ë°˜í™˜"
      - "ëŒ€ëŸ‰ íŒŒì¼ ë¶„ì„ â†’ ìƒ˜í”Œë§ + ë°°ì¹˜ ì²˜ë¦¬"

  import_errors:
    pattern: "í•„ìˆ˜ ëª¨ë“ˆ import ì‹¤íŒ¨"
    standard_response: "ë°ëª¨ ëª¨ë“œ í´ë°±, ê¸°ëŠ¥ ì œí•œ ì•Œë¦¼"
    examples:
      - "transformers ë¯¸ì„¤ì¹˜ â†’ Mistral ê¸°ëŠ¥ ë¹„í™œì„±í™”"
      - "psutil ë¯¸ì„¤ì¹˜ â†’ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ìŠ¤í‚µ"

# ğŸ¨ ì½”ë”© ìŠ¤íƒ€ì¼ ê²°ì •
coding_standards:
  type_annotations:
    decision: "Python 3.12+ ë‚´ì¥ íƒ€ì… ì‚¬ìš© (list[dict] > List[Dict])"
    reasoning: "ìµœì‹  Python í‘œì¤€, ruff UP006 ê·œì¹™ ì¤€ìˆ˜"
    
  async_patterns:
    decision: "lazy initialization + ensure_initialized() íŒ¨í„´"
    reasoning: "import ì‹œì  ì•ˆì •ì„±, í•„ìš” ì‹œì  ì´ˆê¸°í™”"
    
  error_handling:
    decision: "graceful degradation, ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€"
    reasoning: "ì‹œìŠ¤í…œ ì•ˆì •ì„±, ë””ë²„ê¹… í¸ì˜ì„±"

# ğŸ“ˆ ì„±ëŠ¥ ìµœì í™” ê²°ì •
performance_decisions:
  benchmark_strategy:
    decision: "ì‹¤ì œ ì¸¡ì • ì‹¤íŒ¨ ì‹œ mock ë°ì´í„° ì œê³µ"
    reasoning: "CI/CD ì•ˆì •ì„±, ê°œë°œ í™˜ê²½ í˜¸í™˜ì„±"
    
  caching_policy:
    decision: "í…œí”Œë¦¿/ì„¤ì • íŒŒì¼ ë©”ëª¨ë¦¬ ìºì‹œ, íŒë‹¨ ê²°ê³¼ ì„ íƒì  ìºì‹œ"
    reasoning: "ì‘ë‹µ ì†ë„ vs ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ê· í˜•"

# ğŸ›¡ï¸ ë³´ì•ˆ ê²°ì •
security_policies:
  secrets_management:
    decision: "í™˜ê²½ë³€ìˆ˜ + .env íŒŒì¼, gitleaks ìë™ ìŠ¤ìº”"
    reasoning: "ì‹œí¬ë¦¿ ë…¸ì¶œ ë°©ì§€, ìë™í™”ëœ ë³´ì•ˆ ê²€ì¦"
    
  input_validation:
    decision: "pydantic ëª¨ë¸ ê¸°ë°˜ ì…ë ¥ ê²€ì¦"
    reasoning: "íƒ€ì… ì•ˆì •ì„±, ìë™ ë¬¸ì„œí™”"

# ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì´ë ¥
migrations:
  v10_packaging:
    from: "ê°œë³„ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰"
    to: "pip install -e . íŒ¨í‚¤ì§€ ê¸°ë°˜"
    reason: "ê°œë°œ í™˜ê²½ í‘œì¤€í™”, MCP ì„œë²„ ì•ˆì •ì„±"
    date: "2025-01-12"
    
  v10_quality_tools:
    from: "ìˆ˜ë™ ì½”ë“œ ê²€í† "
    to: "ruff/black/mypy ìë™í™”"
    reason: "ì½”ë“œ í’ˆì§ˆ ì¼ê´€ì„±, ë¦¬ë·° íš¨ìœ¨ì„±"
    date: "2025-01-12"